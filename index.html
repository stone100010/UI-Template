<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML页面预览器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* 自定义滚动条 */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* 文件列表项悬停效果 */
        .file-item:hover {
            background-color: rgba(59, 130, 246, 0.1);
            border-left-color: #3b82f6;
        }

        .file-item.active {
            background-color: rgba(59, 130, 246, 0.15);
            border-left-color: #3b82f6;
            border-left-width: 4px;
        }

        /* 预览区域样式 */
        .preview-container {
            position: relative;
            height: calc(100vh - 120px);
            overflow: hidden;
        }

        .preview-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* 加载动画 */
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 搜索框样式 */
        .search-input {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }

        /* 拖拽分隔线 */
        .resize-handle {
            width: 4px;
            background: #e5e7eb;
            cursor: col-resize;
            transition: background-color 0.2s;
        }

        .resize-handle:hover {
            background: #3b82f6;
        }

        /* 空状态样式 */
        .empty-state {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- 顶部导航栏 -->
    <header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-2xl font-bold text-gray-900 flex items-center">
                    <i class="fa fa-desktop mr-3 text-blue-600"></i>
                    HTML页面预览器
                </h1>
                <div class="text-sm text-gray-500">
                    <span id="file-count">0</span> 个页面可用
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <!-- 搜索框 -->
                <div class="relative">
                    <input 
                        type="text" 
                        id="search-input"
                        placeholder="搜索页面..." 
                        class="search-input px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    >
                    <i class="fa fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
                <!-- 视图切换 -->
                <div class="flex bg-gray-100 rounded-lg p-1">
                    <button id="grid-view" class="px-3 py-1 rounded-md text-sm font-medium transition-colors">
                        <i class="fa fa-th-large mr-1"></i>网格
                    </button>
                    <button id="list-view" class="px-3 py-1 rounded-md text-sm font-medium bg-white shadow-sm transition-colors">
                        <i class="fa fa-list mr-1"></i>列表
                    </button>
                </div>
                <!-- 刷新按钮 -->
                <button id="refresh-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fa fa-refresh mr-2"></i>刷新
                </button>
            </div>
        </div>
    </header>

    <!-- 主体内容区域 -->
    <div class="flex h-screen">
        <!-- 左侧文件列表 -->
        <div id="sidebar" class="w-80 bg-white shadow-lg border-r border-gray-200 flex flex-col">
            <!-- 文件列表标题 -->
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900 flex items-center">
                    <i class="fa fa-folder-open mr-2 text-blue-600"></i>
                    页面列表
                </h2>
            </div>
            
            <!-- 文件列表 -->
            <div class="flex-1 overflow-y-auto custom-scrollbar" id="file-list">
                <div class="p-4" id="files-container">
                    <!-- 文件列表将在这里动态生成 -->
                </div>
            </div>
        </div>

        <!-- 拖拽分隔线 -->
        <div id="resize-handle" class="resize-handle"></div>

        <!-- 右侧预览区域 -->
        <div class="flex-1 flex flex-col">
            <!-- 预览工具栏 -->
            <div class="bg-white shadow-sm border-b border-gray-200 px-6 py-3 flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div id="current-file" class="text-sm text-gray-600">
                        请选择一个页面进行预览
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <!-- 预览控制按钮 -->
                    <button id="fullscreen-btn" class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors" disabled>
                        <i class="fa fa-expand mr-1"></i>全屏
                    </button>
                    <button id="open-new-tab" class="px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition-colors" disabled>
                        <i class="fa fa-external-link mr-1"></i>新标签
                    </button>
                </div>
            </div>

            <!-- 预览内容区域 -->
            <div class="preview-container p-6">
                <!-- 空状态 -->
                <div id="empty-state" class="h-full flex items-center justify-center">
                    <div class="text-center">
                        <i class="fa fa-desktop text-6xl text-gray-300 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">选择页面进行预览</h3>
                        <p class="text-gray-500 mb-6">从左侧文件列表中选择一个HTML页面来查看预览</p>
                        <div class="empty-state">
                            <i class="fa fa-magic text-4xl mb-2"></i>
                            <p class="text-sm">实时预览，无需刷新</p>
                        </div>
                    </div>
                </div>

                <!-- 加载状态 -->
                <div id="loading-state" class="hidden h-full flex items-center justify-center">
                    <div class="text-center">
                        <div class="loading-spinner mx-auto mb-4"></div>
                        <p class="text-gray-600">正在加载页面...</p>
                    </div>
                </div>

                <!-- 预览iframe -->
                <div id="preview-container" class="hidden h-full">
                    <iframe id="preview-iframe" class="preview-iframe"></iframe>
                </div>

                <!-- 错误状态 -->
                <div id="error-state" class="hidden h-full flex items-center justify-center">
                    <div class="text-center">
                        <i class="fa fa-exclamation-triangle text-4xl text-red-400 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-900 mb-2">加载失败</h3>
                        <p class="text-gray-600 mb-4">无法加载页面内容</p>
                        <button id="retry-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fa fa-refresh mr-2"></i>重试
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 页面预览器主要JavaScript代码
        class PagePreviewer {
            constructor() {
                this.htmlFiles = [
                    {
                        name: 'Cyberpunk-doubao.html',
                        displayName: '赛博朋克UI模板',
                        description: '霓虹发光、故障艺术、未来科技',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'health-doubao.html',
                        displayName: '玻璃拟态UI模板',
                        description: '半透明模糊、磨砂玻璃、高级质感',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'modern-minimal-doubao.html',
                        displayName: '现代极简UI模板',
                        description: '极简主义、大量留白、功能美学',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'retro-vintage-doubao.html',
                        displayName: '复古怀旧UI模板',
                        description: '温暖怀旧、手工质感、复古配色',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'organic-doubao.html',
                        displayName: '自然有机UI模板',
                        description: '自然流畅、有机曲线、生态配色',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'bauhaus-doubao.html',
                        displayName: '包豪斯UI模板',
                        description: '几何纯粹、原色搭配、功能主义',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'flat-doubao.html',
                        displayName: '扁平化UI模板',
                        description: '简洁扁平、纯色块、高识别度',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'futurism-doubao.html',
                        displayName: '未来科技UI模板',
                        description: '科技炫酷、全息效果、未来感',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: 'industrial-doubao.html',
                        displayName: '工业风格UI模板',
                        description: '粗犷质感、金属光泽、实用功能',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    },
                    {
                        name: '3d-doubao.html',
                        displayName: '3D立体UI模板',
                        description: '立体层次、3D效果、炫酷视觉',
                        category: '设计模板',
                        lastModified: new Date().toLocaleString()
                    }
                ];
                this.currentFile = null;
                this.init();
            }

            init() {
                this.renderFileList();
                this.bindEvents();
            }

            bindEvents() {
                // 搜索功能
                const searchInput = document.getElementById('search-input');
                searchInput.addEventListener('input', (e) => {
                    this.filterFiles(e.target.value);
                });

                // 刷新按钮
                document.getElementById('refresh-btn').addEventListener('click', () => {
                    this.refreshFiles();
                });

                // 视图切换
                document.getElementById('grid-view').addEventListener('click', () => {
                    this.switchView('grid');
                });

                document.getElementById('list-view').addEventListener('click', () => {
                    this.switchView('list');
                });

                // 侧边栏拖拽调整
                this.initResizeHandle();

                // 快捷键
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        if (e.key === 'f') {
                            e.preventDefault();
                            document.getElementById('search-input').focus();
                        }
                    }
                });
            }

            renderFileList(filteredFiles = this.htmlFiles) {
                const container = document.getElementById('files-container');
                const fileCount = document.getElementById('file-count');
                
                fileCount.textContent = filteredFiles.length;

                if (filteredFiles.length === 0) {
                    container.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fa fa-search text-3xl text-gray-300 mb-2"></i>
                            <p class="text-gray-500">未找到匹配的页面</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = filteredFiles.map(file => `
                    <div class="file-item p-4 mb-2 bg-white rounded-lg border border-gray-200 cursor-pointer transition-all duration-200 hover:shadow-md" 
                         onclick="previewer.loadFile('${file.name}')">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-900 mb-1">${file.displayName}</h3>
                                <p class="text-sm text-gray-600 mb-2">${file.description}</p>
                                <div class="flex items-center text-xs text-gray-500">
                                    <span class="px-2 py-1 bg-blue-100 text-blue-700 rounded-full mr-2">${file.category}</span>
                                    <i class="fa fa-clock-o mr-1"></i>
                                    <span>${file.lastModified}</span>
                                </div>
                            </div>
                            <div class="ml-3 text-gray-400">
                                <i class="fa fa-file-text-o"></i>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            filterFiles(query) {
                if (!query.trim()) {
                    this.renderFileList();
                    return;
                }

                const filtered = this.htmlFiles.filter(file => 
                    file.displayName.toLowerCase().includes(query.toLowerCase()) ||
                    file.description.toLowerCase().includes(query.toLowerCase()) ||
                    file.category.toLowerCase().includes(query.toLowerCase())
                );

                this.renderFileList(filtered);
            }

            loadFile(fileName) {
                // 更新当前文件
                this.currentFile = fileName;
                
                // 更新UI状态
                this.updateUIState('loading');
                
                // 更新文件列表高亮
                this.highlightActiveFile(fileName);
                
                // 加载文件
                this.loadPreviewFile(fileName);
            }

            highlightActiveFile(fileName) {
                // 移除所有active类
                document.querySelectorAll('.file-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // 添加active类到当前文件
                const activeItem = Array.from(document.querySelectorAll('.file-item')).find(item => {
                    return item.getAttribute('onclick').includes(fileName);
                });
                if (activeItem) {
                    activeItem.classList.add('active');
                }
            }

            loadPreviewFile(fileName) {
                const iframe = document.getElementById('preview-iframe');
                const currentFileElement = document.getElementById('current-file');
                
                // 更新当前文件名显示
                const file = this.htmlFiles.find(f => f.name === fileName);
                currentFileElement.textContent = `正在预览: ${file.displayName}`;
                
                // 启用控制按钮
                document.getElementById('fullscreen-btn').disabled = false;
                document.getElementById('open-new-tab').disabled = false;
                
                // 绑定控制按钮事件
                document.getElementById('fullscreen-btn').onclick = () => this.toggleFullscreen();
                document.getElementById('open-new-tab').onclick = () => this.openInNewTab(fileName);
                
                iframe.onload = () => {
                    this.updateUIState('success');
                };
                
                iframe.onerror = () => {
                    this.updateUIState('error');
                };
                
                // 设置iframe源
                iframe.src = `htmls/${fileName}`;
            }

            updateUIState(state) {
                const states = {
                    'loading': () => {
                        document.getElementById('empty-state').classList.add('hidden');
                        document.getElementById('preview-container').classList.add('hidden');
                        document.getElementById('error-state').classList.add('hidden');
                        document.getElementById('loading-state').classList.remove('hidden');
                    },
                    'success': () => {
                        document.getElementById('empty-state').classList.add('hidden');
                        document.getElementById('loading-state').classList.add('hidden');
                        document.getElementById('error-state').classList.add('hidden');
                        document.getElementById('preview-container').classList.remove('hidden');
                    },
                    'error': () => {
                        document.getElementById('empty-state').classList.add('hidden');
                        document.getElementById('loading-state').classList.add('hidden');
                        document.getElementById('preview-container').classList.add('hidden');
                        document.getElementById('error-state').classList.remove('hidden');
                    }
                };
                
                if (states[state]) {
                    states[state]();
                }
            }

            toggleFullscreen() {
                const iframe = document.getElementById('preview-iframe');
                if (!document.fullscreenElement) {
                    iframe.requestFullscreen().catch(err => {
                        console.log('无法进入全屏模式:', err);
                    });
                } else {
                    document.exitFullscreen();
                }
            }

            openInNewTab(fileName) {
                window.open(`htmls/${fileName}`, '_blank');
            }

            refreshFiles() {
                // 简单的刷新实现
                this.updateUIState('empty');
                document.getElementById('current-file').textContent = '请选择一个页面进行预览';
                document.getElementById('fullscreen-btn').disabled = true;
                document.getElementById('open-new-tab').disabled = true;
            }

            switchView(view) {
                const gridBtn = document.getElementById('grid-view');
                const listBtn = document.getElementById('list-view');
                
                if (view === 'grid') {
                    gridBtn.classList.add('bg-white', 'shadow-sm');
                    listBtn.classList.remove('bg-white', 'shadow-sm');
                } else {
                    listBtn.classList.add('bg-white', 'shadow-sm');
                    gridBtn.classList.remove('bg-white', 'shadow-sm');
                }
                
                // 这里可以实现网格/列表视图切换的逻辑
            }

            initResizeHandle() {
                const resizeHandle = document.getElementById('resize-handle');
                const sidebar = document.getElementById('sidebar');
                let isResizing = false;
                let startX = 0;
                let startWidth = 0;

                resizeHandle.addEventListener('mousedown', (e) => {
                    isResizing = true;
                    startX = e.clientX;
                    startWidth = sidebar.offsetWidth;
                    document.body.style.cursor = 'col-resize';
                    e.preventDefault();
                });

                document.addEventListener('mousemove', (e) => {
                    if (!isResizing) return;
                    
                    const width = startWidth + (e.clientX - startX);
                    const minWidth = 250;
                    const maxWidth = 600;
                    
                    if (width >= minWidth && width <= maxWidth) {
                        sidebar.style.width = `${width}px`;
                    }
                });

                document.addEventListener('mouseup', () => {
                    isResizing = false;
                    document.body.style.cursor = '';
                });
            }
        }

        // 初始化页面预览器
        const previewer = new PagePreviewer();

        // 重试按钮事件
        document.getElementById('retry-btn').addEventListener('click', () => {
            if (previewer.currentFile) {
                previewer.loadFile(previewer.currentFile);
            }
        });
    </script>
</body>
</html>